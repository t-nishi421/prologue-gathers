- texts.each_with_index do |t, index|
  .story-content
    .story-content__info
      .story-content__info__chapter
        = "#{index + 1}章：#{t.chapter}"
      = link_to user_path(t.user.id) do
        .story-content__info__author
          .story-content__info__author__icon{style: "background-image: url(#{asset_path t.user.image})"}
          = t.user.name
    - if user_signed_in? && t.user == current_user
      .SunContent
        .story-content__text{"data-text_id" => t.id}
          = safe_join(t.text.split("\n"),tag(:br))

      .MoonContent
        .MyStoryEditText
          .story-content__text{"data-text_id" => t.id}
            = safe_join(t.text.split("\n"),tag(:br))
          .ButtonArea
            .StoryEditButton
              編集する

        .MyStoryEditForm
          = form_with model: @my_story,url: text_path(t.id), method: :patch,  local: true do |f|
            = f.text_area :text, value: "#{safe_join(t.text.split("\n"),tag(:br))}", class: 'TextField', required: true
            .ButtonArea
              .StopStoryEditButton
                編集をやめる
              = f.submit "更新", class: "UpdateButton"
    - else
      .story-content__text{"data-text_id" => t.id}
        = safe_join(t.text.split("\n"),tag(:br))
